# 自适应布局

## 画布尺寸计算

### 宽度适配
- 最大宽度：`min(屏幕宽度 - 40, 400)`
- 单元格宽度：`(画布宽度 - 边距×2) / 列数`
- 单元格高度 = 单元格宽度（正方形）

### 球半径调整
- 最大半径：`min(单元格宽度 × 0.4, 默认半径)`
- 最小半径：12px

### 高度限制
- 最大高度：屏幕高度 × 60%
- 超出时等比例缩小

## 高分辨率支持
- 检测 devicePixelRatio
- DPR > 1 时：画布尺寸 × DPR，然后缩放 ctx

## 响应式更新
- 监听 resize 和 orientationchange 事件
- 游戏未进行时才允许调整
- 调整后重新计算所有元素的位置
